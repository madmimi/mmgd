!function(window,document){"use strict";var content,contents=[],rxAnimation=/@-skrollr-keyframes\s+([\w-]+)/g,rxKeyframes=/\s*\{\s*((?:[^{]+\{[^}]*\}\s*)+?)\s*\}/g,rxSingleKeyframe=/([\w\-]+)\s*\{([^}]+)\}/g,rxAnimationUsage=/-skrollr-animation-name\s*:\s*([\w-]+)/g,rxAttributeSetter=/-skrollr-(anchor-target|smooth-scrolling|emit-events|menu-offset)\s*:\s*['"]([^'"]+)['"]/g,fetchRemote=function(url){var xhr=new XMLHttpRequest;try{xhr.open("GET",url,!1),xhr.send(null)}catch(e){window.XDomainRequest&&(xhr=new XDomainRequest,xhr.open("GET",url,!1),xhr.send(null))}return xhr.responseText},kickstart=function(stylesheets){for(var stylesheetIndex=0;stylesheetIndex<stylesheets.length;stylesheetIndex++){var sheet=stylesheets[stylesheetIndex];if("LINK"===sheet.tagName){if(null===sheet.getAttribute("data-skrollr-stylesheet"))continue;if(window.matchMedia){var media=sheet.getAttribute("media");if(media&&!matchMedia(media).matches)continue}content=fetchRemote(sheet.href)}else content=sheet.textContent||sheet.innerText||sheet.innerHTML;content&&contents.push(content)}contents.reverse();for(var animations={},selectors=[],attributes=[],contentIndex=0;contentIndex<contents.length;contentIndex++)content=contents[contentIndex],parseAnimationDeclarations(content,animations),parseAnimationUsage(content,selectors),parseAttributeSetters(content,attributes);applyKeyframeAttributes(animations,selectors),applyAttributeSetters(attributes)},parseAnimationDeclarations=function(input,output){rxAnimation.lastIndex=0;for(var animation,rawKeyframes,keyframe,curAnimation;null!==(animation=rxAnimation.exec(input));)for(rxKeyframes.lastIndex=rxAnimation.lastIndex,rawKeyframes=rxKeyframes.exec(input),rxSingleKeyframe.lastIndex=0,curAnimation=output[animation[1]]={};null!==(keyframe=rxSingleKeyframe.exec(rawKeyframes[1]));)curAnimation[keyframe[1]]=keyframe[2].replace(/[\n\r\t]/g,"")},extractSelector=function(input,startIndex){for(var begin,end=startIndex;end--&&"{"!==input.charAt(end););for(begin=end;begin--&&"}"!==input.charAt(begin-1););return input.substring(begin,end).replace(/[\n\r\t]/g,"")},parseAnimationUsage=function(input,output){var match,selector;for(rxAnimationUsage.lastIndex=0;null!==(match=rxAnimationUsage.exec(input));)selector=extractSelector(input,rxAnimationUsage.lastIndex),output.push([selector,match[1]])},parseAttributeSetters=function(input,output){var match,selector;for(rxAttributeSetter.lastIndex=0;null!==(match=rxAttributeSetter.exec(input));)selector=extractSelector(input,rxAttributeSetter.lastIndex),output.push([selector,match[1],match[2]])},applyKeyframeAttributes=function(animations,selectors){for(var elements,keyframes,keyframeName,elementIndex,attributeName,attributeValue,curElement,selectorIndex=0;selectorIndex<selectors.length;selectorIndex++)if(elements=document.querySelectorAll(selectors[selectorIndex][0])){keyframes=animations[selectors[selectorIndex][1]];for(keyframeName in keyframes)for(elementIndex=0;elementIndex<elements.length;elementIndex++)curElement=elements[elementIndex],attributeName="data-"+keyframeName,attributeValue=keyframes[keyframeName],curElement.hasAttribute(attributeName)&&(attributeValue+=curElement.getAttribute(attributeName)),curElement.setAttribute(attributeName,attributeValue)}},applyAttributeSetters=function(selectors){for(var curSelector,elements,attributeName,attributeValue,elementIndex,selectorIndex=0;selectorIndex<selectors.length;selectorIndex++)if(curSelector=selectors[selectorIndex],elements=document.querySelectorAll(curSelector[0]),attributeName="data-"+curSelector[1],attributeValue=curSelector[2],elements)for(elementIndex=0;elementIndex<elements.length;elementIndex++)elements[elementIndex].setAttribute(attributeName,attributeValue)};kickstart(document.querySelectorAll("link, style"))}(window,document);