/*! Mad Mimi & GoDaddy - v0.1.0 - 2014-08-26
* Copyright (c) 2014 Sascha Michael Trinkaus; */
!function(){document.documentElement.setAttribute("data-ua",navigator.userAgent);var SECTION_HEIGHT=1800,OFFSET_TOP=520,DEFAULT_SPEED=500,BACK_TO_TOP_SPEED=3e3,PLAY_SPEED=5e4,downLink=($("body section:first-of-type"),$("a.chevron_down")),playLink=$("a#play"),pauseLink=$("a#pause"),backTopLink=$("a#backTop"),isPlaying=!1,getCurrentPosition=function(){return Math.floor(window.skrollr.getScrollTop()/SECTION_HEIGHT)*SECTION_HEIGHT},scrollSpeedMultiplicator=function(){var maxScroll=window.skrollr.getMaxScrollTop();return(maxScroll-window.skrollr.getScrollTop())/maxScroll},scrollTo=function(top){window.skrollr.animateTo(top>0?top+OFFSET_TOP:0,{duration:DEFAULT_SPEED,easing:"swing"})},playToEnd=function(){console.log(window.skrollr.getMaxScrollTop()),window.skrollr.animateTo(window.skrollr.getMaxScrollTop(),{duration:PLAY_SPEED*scrollSpeedMultiplicator(),easing:"linear"})},backToTop=function(){window.skrollr.animateTo(0,{duration:BACK_TO_TOP_SPEED*scrollSpeedMultiplicator(),easing:"swing"})},stopScrolling=function(){window.skrollr.stopAnimateTo()},scrollToPrevSection=function(){scrollTo(getCurrentPosition()-SECTION_HEIGHT)},scrollToNextSection=function(){scrollTo(getCurrentPosition()+SECTION_HEIGHT)},updateUI=function(data){data||(data={curTop:window.skrollr.getScrollTop(),maxTop:window.skrollr.getMaxScrollTop()}),data.curTop<data.maxTop?isPlaying?(playLink.hide(),pauseLink.show(),backTopLink.hide()):(playLink.show(),pauseLink.hide(),data.curTop>OFFSET_TOP?backTopLink.show():backTopLink.hide()):(isPlaying=!1,backTopLink.show(),playLink.hide(),pauseLink.hide())};$(document).ready(function(){downLink.bind("click",function(e){e.preventDefault(),scrollToNextSection()}),$(document).keydown(function(e){switch(e.which){case 37:case 38:scrollToPrevSection();break;case 39:case 40:scrollToNextSection();break;default:return}e.preventDefault()}),pauseLink.hide(),backTopLink.hide(),playLink.click(function(e){e.preventDefault(),isPlaying=!0,playToEnd(),updateUI()}),pauseLink.click(function(e){e.preventDefault(),isPlaying=!1,stopScrolling(),updateUI()}),backTopLink.click(function(e){e.preventDefault(),isPlaying=!1,backToTop(),updateUI()})}),window.skrollr=skrollr.init({render:function(data){updateUI(data)}})}();